<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NextGen Assistant</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Minimal additions only; keep your site look */
    .ng-wrap { max-width: 900px; margin: 0 auto; padding: 28px 18px 40px; }
    .ng-card { background: #fff; border-radius: 18px; box-shadow: 0 10px 35px rgba(0,0,0,0.08); overflow: hidden; }
    .ng-head { padding: 22px 22px; background: linear-gradient(135deg, #7a5cff, #8b5cf6); color: #fff; }
    .ng-head h1 { margin: 0 0 6px; font-size: 28px; }
    .ng-head p { margin: 0; opacity: 0.95; }
    .ng-body { padding: 22px; }
    label { display:block; font-weight: 700; margin: 14px 0 8px; }
    select, textarea, button { width: 100%; box-sizing: border-box; font-size: 15px; border-radius: 12px; }
    select, textarea { padding: 12px; border: 1px solid #d5d5df; }
    textarea { min-height: 110px; resize: vertical; }
    .ng-actions { display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 14px; }
    button {
      padding: 12px 14px;
      border: none;
      color: #fff;
      font-weight: 800;
      cursor: pointer;
      background: linear-gradient(135deg, #7a5cff, #8b5cf6);
    }
    button:hover { opacity: 0.96; }
    .secondary {
      background: #fff;
      color: #5a47c9;
      border: 1px solid #d8ccff;
    }
    .out {
      display: none;
      margin-top: 16px;
      white-space: pre-wrap;
      background: #f9f9ff;
      border-left: 5px solid #8b5cf6;
      padding: 16px;
      border-radius: 12px;
    }
    .smallnote { margin-top: 10px; color:#666; font-size: 13px; line-height: 1.35; }
  </style>
</head>
<body>

  <!-- If your app uses a shared header/nav, keep it as-is elsewhere.
       This page is intentionally self-contained and clean. -->

  <div class="ng-wrap">
    <div class="ng-card">
      <div class="ng-head">
        <h1>NextGen Assistant</h1>
        <p>Generate a thoughtful, professional parent response</p>
      </div>

      <div class="ng-body">
        <label for="parentType">Parent Personality Style</label>
        <select id="parentType">
          <option value="Balanced">Balanced (Default – use when unsure)</option>
          <option value="Driver">Driver</option>
          <option value="Amiable">Amiable</option>
          <option value="Expressive">Expressive</option>
          <option value="Analytical">Analytical</option>
        </select>

        <label for="parentEmail">Parent’s Email to You</label>
        <textarea id="parentEmail">Why are you punishing Johnny for something he claims he didn't do?</textarea>

        <label for="situationContext">Your Situation Context</label>
        <textarea id="situationContext">I personally observed Johnny hit another student during class.</textarea>

        <div class="ng-actions">
          <button type="button" onclick="generateEmail()">Generate Response</button>
          <button type="button" class="secondary" onclick="copyEmail()">Copy Email</button>
        </div>

        <div id="emailOutput" class="out"></div>

        <div class="smallnote">
          Demo mode for reviewers: this version always works (no API keys). AI automation can be added later via a backend.
        </div>
      </div>
    </div>
  </div>

<script>
  function toneOpening(styleLower) {
    if (styleLower.includes("driver")) return "Thank you for your email. I want to address your concern clearly and directly.";
    if (styleLower.includes("amiable")) return "Thank you for reaching out. I understand how upsetting this situation feels.";
    if (styleLower.includes("expressive")) return "I appreciate you reaching out and sharing your concerns.";
    if (styleLower.includes("analytical")) return "Thank you for your message. I’d like to clearly outline what I observed and the steps taken.";
    return "Thank you for reaching out. I appreciate the opportunity to clarify what occurred.";
  }

  function generateEmail() {
    const style = document.getElementById("parentType").value || "Balanced";
    const parentMsg = (document.getElementById("parentEmail").value || "").trim();
    const context = (document.getElementById("situationContext").value || "").trim();

    const opening = toneOpening(style.toLowerCase());

    const email = `
Subject: Re: Classroom Concern

${opening}

I understand your concern:
"${parentMsg || "…"}"

Here is what I observed in class:
- ${context || "A situation occurred that required immediate intervention."}

My goal is always student safety, fairness, and helping students learn from mistakes—not punishment. I will also speak with your child to hear their perspective and review any additional information.

Please let me know if you’d like to discuss this further. I value working together to support your child.

Sincerely,
[Teacher Name]
`.trim();

    const output = document.getElementById("emailOutput");
    output.style.display = "block";
    output.textContent = email;
  }

  function copyEmail() {
    const output = document.getElementById("emailOutput");
    const text = (output && output.textContent) ? output.textContent : "";
    if (!text) { alert("Generate an email first, then click Copy Email."); return; }

    navigator.clipboard.writeText(text).then(
      () => alert("Copied to clipboard."),
      () => alert("Could not copy automatically. You can select the text and copy manually.")
    );
  }
</script>

</body>
</html>
