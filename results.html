<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Results</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">

<nav class="topNav">
  <a href="index.html">Home</a>
  <a href="quiz.html">Personality Quiz</a>
  <a class="active" href="results.html">Results</a>
  <a href="deep-dive.html">Deep Dive</a>
  <a href="compatibility.html">Compatibility</a>
  <a href="nextgen-assistant.html">NextGen Assistant</a>
  <a href="wrap-up.html">Wrap-Up</a>
  <a href="learning-quiz.html">Learning Quiz</a>
</nav>

<h1>Your Personality Results</h1>
<p class="sub">
Your style shapes how you communicate, make decisions, handle pressure, and navigate expectations at work and in interviews.
</p>

<div id="missing" class="card" style="display:none;">
  <h2>No quiz result found</h2>
  <p>Please take the Personality Quiz first.</p>
  <div class="btnRow">
    <a class="button" href="quiz.html">Go to Quiz</a>
  </div>
</div>

<div id="main" style="display:none;">

  <div class="card" style="margin-bottom: 14px;">
    <h2>Your Type: <span id="typeLabel" class="pill"></span></h2>
    <p id="summary"></p>

    <div class="btnRow">
      <a class="button secondary" href="quiz.html">Retake Quiz</a>
      <a class="button secondary" href="deep-dive.html">Continue to Deep Dive</a>
      <a class="button secondary" href="compatibility.html">Continue to Compatibility</a>
    </div>
  </div>

  <div class="card" style="margin-bottom: 14px;">
    <h2>Score Bars (Percentages)</h2>
    <div id="bars"></div>
    <p style="margin-top:10px;">Percentages are based on your answers out of 10 questions.</p>
  </div>

  <div class="card" style="margin-bottom: 14px;">
    <h2>Score Breakdown (raw)</h2>
    <pre id="raw"></pre>
  </div>

  <div class="card">
    <h2>Strengths & Challenges</h2>
    <table class="table">
      <tr><th>Strengths</th><td id="strengths"></td></tr>
      <tr><th>Challenges</th><td id="challenges"></td></tr>
      <tr><th>Communication Style</th><td id="comm"></td></tr>
      <tr><th>Under Pressure</th><td id="stress"></td></tr>
    </table>
  </div>

</div>

</div>

<script>
  const TYPES = ["Driver", "Amiable", "Expressive", "Analytical"];

  const CONTENT = {
    Driver: {
      summary: "Direct, decisive, and outcome-focused. You prioritize progress, clarity, and results in high-stakes professional settings.",
      strengths: "Decisive • Confident • Action-oriented • Efficient under deadlines",
      challenges: "Can come across as blunt • Impatient with slow progress • May overlook stakeholder concerns",
      comm: "Concise, direct, results-focused communication.",
      stress: "May become controlling or overly forceful under pressure."
    },
    Amiable: {
      summary: "Supportive, steady, and relationship-focused. You prioritize trust, stability, and collaboration across teams.",
      strengths: "Reliable • Patient • Team-oriented • Builds trust",
      challenges: "Avoids conflict • Hesitant to say no • Can take on too much",
      comm: "Warm, collaborative, reassuring communication.",
      stress: "May withdraw, defer decisions, or people-please under pressure."
    },
    Expressive: {
      summary: "Energetic, persuasive, and idea-driven. You thrive on connection, momentum, and influencing outcomes.",
      strengths: "Engaging • Optimistic • Persuasive • Creative",
      challenges: "Impulsive • May miss details • Can over-commit",
      comm: "Animated, story-driven, big-picture communication.",
      stress: "May become scattered or reactive under pressure."
    },
    Analytical: {
      summary: "Thoughtful, precise, and logic-driven. You prioritize accuracy, structure, and informed decision-making.",
      strengths: "Prepared • Thorough • Data-informed • Risk-aware",
      challenges: "Overanalyzes • Slower to decide • Can seem distant",
      comm: "Structured, detailed, evidence-based communication.",
      stress: "May get stuck in analysis or disengage under pressure."
    }
  };

  function getParam(name) {
    return new URL(window.location.href).searchParams.get(name);
  }

  function parseJSON(str) {
    try { return JSON.parse(str); } catch { return null; }
  }

  function renderBars(scores) {
    const bars = document.getElementById("bars");
    bars.innerHTML = "";

    const total = TYPES.reduce((sum, t) => sum + Number(scores[t] || 0), 0) || 1;

    for (const t of TYPES) {
      const value = Number(scores[t] || 0);
      const pct = Math.round((value / total) * 100);

      const row = document.createElement("div");
      row.className = "barLine";

      const label = document.createElement("div");
      label.textContent = t;

      const track = document.createElement("div");
      track.className = "track";

      const fill = document.createElement("div");
      fill.className = `fill ${t}`;
      fill.style.width = pct + "%";

      track.appendChild(fill);

      const num = document.createElement("div");
      num.textContent = pct + "%";

      row.appendChild(label);
      row.appendChild(track);
      row.appendChild(num);

      bars.appendChild(row);
    }
  }

  (function init() {
    const type = getParam("type") || localStorage.getItem("bc_personality_type");
    const scores = parseJSON(getParam("scores")) || parseJSON(localStorage.getItem("bc_personality_scores"));

    if (!type || !scores) {
      document.getElementById("missing").style.display = "block";
      return;
    }

    document.getElementById("typeLabel").textContent = type;
    document.getElementById("summary").textContent = CONTENT[type]?.summary || "";
    document.getElementById("strengths").textContent = CONTENT[type]?.strengths || "";
    document.getElementById("challenges").textContent = CONTENT[type]?.challenges || "";
    document.getElementById("comm").textContent = CONTENT[type]?.comm || "";
    document.getElementById("stress").textContent = CONTENT[type]?.stress || "";

    document.getElementById("raw").textContent = JSON.stringify(scores, null, 2);

    renderBars(scores);
    document.getElementById("main").style.display = "block";
  })();
</script>

</body>
</html>
