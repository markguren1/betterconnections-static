<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Learning Quiz</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">

<nav class="topNav">
  <a href="index.html">Home</a>
  <a href="quiz.html">Personality Quiz</a>
  <a href="results.html">Results</a>
  <a href="deep-dive.html">Deep Dive</a>
  <a href="compatibility.html">Compatibility</a>
  <a href="nextgen-assistant.html">NextGen Assistant</a>
  <a href="wrap-up.html">Wrap-Up</a>
  <a class="active" href="learning-quiz.html">Learning Quiz</a>
</nav>

<h1>Learning Quiz</h1>
<p class="sub">
Test your understanding of personality compatibility with this quick mini-game.
For learning and entertainment — understanding, not diagnosis.
</p>

<div class="card" style="margin-top:18px;">
  <h2 style="margin-top:0;">Bonus Mini-Game: Match Your Vibe</h2>
  <p class="sub" style="margin-top:6px;">
    Quick, fun practice: guess if two styles are compatible, then see why.
    (For learning and entertainment — understanding, not diagnosis.)
  </p>
  <div id="swipeGame" class="swipe-container"></div>
</div>

</div>

<script>
(function() {
  const gameContainer = document.getElementById('swipeGame');
  if (!gameContainer) return;

  // From your enclosed app's Love Stories "Match Your Vibe Game"
  const compat = [
    { q: 'Driver + Amiable?', a: true,  why: 'Complements decisiveness with support.' },
    { q: 'Analytical + Expressive?', a: false, why: 'Clash on details vs. big picture.' },
    { q: 'Expressive + Amiable?', a: true,  why: 'Energy pairs well with support.' },
    { q: 'Driver + Analytical?', a: false, why: 'Directness vs. deliberation can conflict.' },
  ];

  let gameIdx = 0;
  let score = 0;

  function renderSwipe() {
    gameContainer.innerHTML = `
      <div class="card" id="currentCard" style="margin:0;">
        <p style="font-weight:700; margin-bottom:10px;">${compat[gameIdx].q}</p>
        <div class="sub" style="margin:0 0 10px 0;">Score: ${score}/${compat.length}</div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn love" type="button" onclick="swipe(true)">Match</button>
          <button class="btn brand" type="button" onclick="swipe(false)">No</button>
        </div>
        <div id="feedback" class="sub" style="margin-top:10px;"></div>
      </div>`;
  }

  window.swipe = function(choice) {
    try {
      const card = document.getElementById('currentCard');
      const feedback = document.getElementById('feedback');
      if (!card || !feedback) return;

      const correct = compat[gameIdx].a === choice;
      feedback.innerHTML = correct
        ? '<strong>Correct:</strong> ' + compat[gameIdx].why
        : '<strong>Not quite:</strong> ' + compat[gameIdx].why;

      if (correct) score++;

      setTimeout(() => {
        gameIdx++;
        if (gameIdx < compat.length) {
          renderSwipe();
        } else {
          gameContainer.innerHTML = `
            <div class="card" style="margin:0;">
              <p style="font-weight:700;">Game Over!</p>
              <p class="sub">Final Score: ${score}/${compat.length}</p>
              <button class="btn brand" type="button" onclick="restartGame()">Restart</button>
            </div>`;
        }
      }, 1200);
    } catch (e) {
      console.error('Swipe game error:', e);
    }
  };

  window.restartGame = function() {
    gameIdx = 0;
    score = 0;
    renderSwipe();
  };

  renderSwipe();
})();
</script>

</body>
</html>
