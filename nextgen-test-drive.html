<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NextGen Assistant – Test Drive</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background: linear-gradient(135deg, #e9d5ff, #faf5ff);
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 780px;
      margin: auto;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 15px 40px rgba(0,0,0,.15);
      overflow: hidden;
    }

    header {
      background: linear-gradient(135deg, #7a5cff, #8b5cf6);
      color: #fff;
      padding: 28px;
      text-align: center;
    }

    .section {
      padding: 24px 28px;
    }

    .note {
      background: #f5f3ff;
      border-left: 5px solid #8b5cf6;
      padding: 14px;
      border-radius: 10px;
      margin-bottom: 14px;
      font-size: 14px;
    }

    .uses {
      font-size: 14px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 16px;
      margin-bottom: 6px;
    }

    select, textarea, button {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    textarea {
      min-height: 90px;
      resize: vertical;
    }

    button {
      margin-top: 18px;
      background: #7a5cff;
      color: white;
      border: none;
      font-size: 15px;
      font-weight: bold;
      cursor: pointer;
    }

    button:hover {
      opacity: 0.95;
    }

    .output {
      display: none;
      white-space: pre-wrap;
      background: #f5f3ff;
      border-left: 5px solid #8b5cf6;
      padding: 16px;
      border-radius: 10px;
      margin-top: 18px;
    }

    footer {
      text-align: center;
      font-size: 13px;
      color: #666;
      padding: 14px;
    }

    /* Modal */
    .modal-bg {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal {
      background: #fff;
      border-radius: 16px;
      max-width: 600px;
      width: 100%;
      padding: 20px;
    }

    .modal h2 {
      margin-top: 0;
    }

    .close {
      margin-top: 14px;
      background: #fff;
      border: 1px solid #ccc;
      color: #444;
    }
  </style>
</head>

<body>
<div class="container">
  <header>
    <h1>NextGen Assistant</h1>
    <p>Test Drive</p>
  </header>

  <div class="section">
    <div class="note">
      Try a few real examples. After the test drive, pricing appears.
    </div>

    <div class="uses">
      Test Drive uses remaining: <span id="uses">3</span>
    </div>

    <label>Parent Personality Style</label>
    <select id="style">
      <option>Balanced</option>
      <option>Driver</option>
      <option>Amiable</option>
      <option>Expressive</option>
      <option>Analytical</option>
    </select>

    <label>Parent’s Email</label>
    <textarea id="parentMsg">Why are you punishing Johnny for something he says he didn’t do?</textarea>

    <label>Your Context</label>
    <textarea id="context">I personally observed Johnny hit another student.</textarea>

    <button onclick="generate()">Generate Response</button>

    <div id="output" class="output"></div>
  </div>

  <footer>© 2025 BetterConnections</footer>
</div>

<div id="modal" class="modal-bg">
  <div class="modal">
    <h2>Did this feel useful?</h2>
    <ul>
      <li>Saved time?</li>
      <li>Reduced escalation?</li>
      <li>Improved communication?</li>
    </ul>
    <p><strong>$9.99 / month</strong><br><strong>$79 / year</strong> (gift option)</p>
    <button class="close" onclick="closeModal()">Close</button>
  </div>
</div>

<script>
  const MAX = 3;
  const KEY = "bc_demo_uses";

  function remaining() {
    const v = localStorage.getItem(KEY);
    return v === null ? MAX : Math.max(0, Number(v));
  }

  function setRemaining(n) {
    localStorage.setItem(KEY, n);
    document.getElementById("uses").textContent = n;
  }

  function generate() {
    let r = remaining();
    if (r <= 0) {
      document.getElementById("modal").style.display = "flex";
      return;
    }

    const style = document.getElementById("style").value.toLowerCase();
    let opening = "Thank you for reaching out. I appreciate the opportunity to clarify.";

    if (style === "driver") opening = "Thank you for your email. I want to address this directly.";
    if (style === "amiable") opening = "Thank you for reaching out. I understand your concern.";
    if (style === "expressive") opening = "I appreciate you sharing your concerns.";
    if (style === "analytical") opening = "Thank you for your message. I’d like to outline what I observed.";

    const email =
`Subject: Re: Classroom Concern

${opening}

"${document.getElementById("parentMsg").value}"

Here is what I observed:
- ${document.getElementById("context").value}

My goal is always student safety and constructive learning.

Sincerely,
[Teacher Name]`;

    const out = document.getElementById("output");
    out.style.display = "block";
    out.textContent = email;

    r--;
    setRemaining(r);
    if (r === 0) document.getElementById("modal").style.display = "flex";
  }

  function closeModal() {
    document.getElementById("modal").style.display = "none";
  }

  setRemaining(remaining());
</script>
</body>
</html>
